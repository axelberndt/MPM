<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../src/out/mpm.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../src/out/mpm.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<mpm xmlns="http://www.cemfi.de/mpm/ns/1.0">
    <performance name="a performance" pulsesPerQuarter="720">
        <global>
            <header>
                <ornamentationStyles>
                    <styleDef name="Stylename">
                        <!-- an ornament is a series of transformers -->
                        <ornamentDef name="arpeggio">
                            
                            <!-- the temporalSpread transformer offsets all elements at a given time by a certain amount defined by a power function; the frame attributes are either symbolic or physical but not both (e.g. frame.start OR milliseconds.frame.start) -->
                            <temporalSpread
                                milliseconds.frame.start="-200.0" milliseconds.frame.end="200.0"
                                intensity="1.4"
                                noteoff.shift="false"/>
                            
                            <!-- the dynamicsGradient transformer applies relative dynamics deviations to the list of notes affected; the sequence of the list determines the relative position in the linear dynamics function -->
                            <dynamicsGradient transition.from="-1.0" transition.to="1.0"/>
                        </ornamentDef>
                        <ornamentDef name="arpeggio2">
                            <temporalSpread
                                frame.start="-100.0" frame.end="100.0"
                                intensity="1.4"
                                noteoff.shift="true"/>
                            
                            <dynamicsGradient transition.from="-1.0" transition.to="1.0"/>
                        </ornamentDef>
                    </styleDef>
                </ornamentationStyles>
            </header>
            
            <dated>
                <ornamentationMap>
                    <style date="0.0" name.ref="Stylename"/>
                    
                    <!-- apply an arpeggio to all notes (listed lowest to highest pitch) at date 0.0 -->
                    <!-- scale is for the dynamics gradient and might be optional with default value 0.0 -->
                    <!-- Direction sets the sequence of notes ordered by in-/decreasing pitch; default is up. What if there are multiple notes with the same pitch? -->
                    <ornament date="0.0" name.ref="arpeggio" scale="20.0" note.order="ascending pitch|descending pitch"/>
                    
                    <!-- apply an arpeggio to the notes listed and in the sequence of the list -->
                    <!-- direction="up" (default) follows the list in the specified sequence; direction="down" follows the list in reverse sequence -->
                    <ornament date="720.0" name.ref="arpeggio2" scale="20.0" noteids="id1 id3 id2 id4"/>
                    
                    <!-- How about grouping of elements? Maybe with brackets in the noteids list (id1 id2) (id3 id4).  -->
                    <!-- If the ornament does not edit but replace the original notes, can I repeat it for a number of times over the ornament time frame? With this I could make an arpeggio into a tremolo only by repeating it. -->
                </ornamentationMap>
            </dated>
        </global>
    </performance>
</mpm>